{"version":3,"sources":["webpack:///C:/Users/HUAWEI/Desktop/编程实战/树洞/树洞 V2/shudong/components/poster.vue?3d4c","webpack:///C:/Users/HUAWEI/Desktop/编程实战/树洞/树洞 V2/shudong/components/poster.vue?8949","webpack:///C:/Users/HUAWEI/Desktop/编程实战/树洞/树洞 V2/shudong/components/poster.vue?873c","webpack:///C:/Users/HUAWEI/Desktop/编程实战/树洞/树洞 V2/shudong/components/poster.vue?0676","uni-app:///components/poster.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;;;AAGrD;AACiL;AACjL,gBAAgB,0LAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,mPAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9BA;AAAA;AAAA;AAAA;AAA4pB,CAAgB,irBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkBhrB;AACA;AACA,sBADA,EADA;;AAIA,MAJA,kBAIA;AACA;AACA,oBADA;AAEA,yBAFA;AAGA;AACA,oBADA;AAEA,mBAFA;AAGA,qBAHA,EAHA;;;AASA,GAdA;AAeA,SAfA,qBAeA;AACA;AACA;AACA;AACA;AACA;AACA,KALA;AAMA,GAtBA;AAuBA;AACA;AACA,gBAFA,0BAEA;;AAEA;AACA,+DAHA,CAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iCADA;AAEA;AACA;AACA;AACA,WALA;AAMA;AACA;AACA,WARA;;AAUA,OAXA;AAYA,KAhEA;AAiEA;AACA,sBAlEA,gCAkEA;AACA;AACA;AACA;AACA;AACA,6CADA;AAEA;AACA;AACA,eAJA;;AAMA,WAPA,MAOA;AACA;AACA;AACA,SAZA;;AAcA,KAjFA;AAkFA;AACA,aAnFA,uBAmFA;AACA;AACA,iCADA;AAEA;AACA;AACA,2BADA;AAEA,2BAFA;AAGA,sBAHA;;AAKA,SARA;AASA;AACA;AACA,SAXA;;AAaA,KAjGA,EAvBA,E","file":"components/poster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./poster.vue?vue&type=template&id=a60ae070&scoped=true&\"\nvar renderjs\nimport script from \"./poster.vue?vue&type=script&lang=js&\"\nexport * from \"./poster.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a60ae070\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/poster.vue\"\nexport default component.exports","export * from \"-!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./poster.vue?vue&type=template&id=a60ae070&scoped=true&\"","var components = {\n  uniPopup: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var a0 = {\n    position: \"fixed\",\n    bottom: 0,\n    top: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: \"rgb(34, 21, 51, 0.6)\"\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        a0: a0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!X:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./poster.vue?vue&type=script&lang=js&\"","<!-- \r\nDescription: poster\r\nAuthor: XueshanChen\r\nDate：2020//11/26\r\nVersion:1.0.0\r\n -->\r\n\r\n<template>\r\n\t<view @longPress=\"getPhotosAlbumAuth\">\r\n\t\t<uni-popup ref=\"popPoster\" :maskClass=\"{'position': 'fixed',\r\n\t\t\t'bottom': 0,'top': 0,'left': 0,'right': 0,'backgroundColor': 'rgb(34, 21, 51, 0.6)'}\">\r\n\t\t\t<canvas canvas-id='shareFriend' style='width:300px;height:340px;'></canvas>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport uniPopup from '@/components/uni-popup/uni-popup.vue'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tuniPopup\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpicTempUrl: '',\r\n\t\t\t\tposterStatus: false,\r\n\t\t\t\tposterInfo: {\r\n\t\t\t\t\tnickname: \"\",\r\n\t\t\t\t\tcomment: \"\",\r\n\t\t\t\t\tstaffIcon: \"\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tuni.$on(\"share\", (res) => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tthis.posterInfo = res;\r\n\t\t\t\tthis.createCanvas();\r\n\t\t\t\tthis.$refs.popPoster.open();\r\n\t\t\t});\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//绘制海报\r\n\t\t\tcreateCanvas() {\r\n\r\n\t\t\t\tvar ctx = uni.createCanvasContext('shareFriend', this);\r\n\t\t\t\tctx.drawImage('../static/poster/bg.png', 0, 0, 300, 340); //画背景图\r\n\r\n\t\t\t\t//画头像\r\n\t\t\t\tctx.save();\r\n\t\t\t\tvar r = 25;\r\n\t\t\t\tvar x = 20;\r\n\t\t\t\tvar y = 20;\r\n\t\t\t\tvar d = 2 * r;\r\n\t\t\t\tvar cx = x + r;\r\n\t\t\t\tvar cy = y + r;\r\n\t\t\t\tctx.arc(cx, cy, r, 0, 2 * Math.PI);\r\n\t\t\t\tctx.clip();\r\n\t\t\t\tctx.drawImage(this.posterInfo.staffIcon, x, y, d, d);\r\n\t\t\t\tctx.restore();\r\n\r\n\t\t\t\t//画二维码,这边可以变成小程序码\r\n\t\t\t\tctx.save();\r\n\t\t\t\tvar rCode = 45;\r\n\t\t\t\tvar xCode = 10;\r\n\t\t\t\tvar yCode = 200;\r\n\t\t\t\td = 2 * rCode;\r\n\t\t\t\tcx = xCode + rCode;\r\n\t\t\t\tcy = yCode + rCode;\r\n\t\t\t\tctx.arc(cx, cy, rCode, 0, 2 * Math.PI);\r\n\t\t\t\tctx.clip();\r\n\t\t\t\tctx.drawImage('../static/poster/tem.png', xCode, yCode, d, d);\r\n\t\t\t\tctx.restore();\r\n\r\n\r\n\t\t\t\t//添加文字\r\n\r\n\t\t\t\t//user image\r\n\t\t\t\tctx.setFontSize(14);\r\n\t\t\t\tctx.setFillStyle('black');\r\n\t\t\t\tctx.fillText(this.posterInfo.nickname, 90, 50);\r\n\r\n\t\t\t\tctx.setFontSize(16);\r\n\t\t\t\tctx.setFillStyle('black');\r\n\t\t\t\tctx.fillText(\"适合我的解压方式是：\", 40, 110);\r\n\r\n\t\t\t\t//提示文字\r\n\t\t\t\tctx.setFontSize(14);\r\n\t\t\t\tctx.setFillStyle('#F0AD4E');\r\n\t\t\t\tctx.fillText('扫描二维码测测我的！', 190, 250);\r\n\r\n\t\t\t\t//开始画画完后生成新的临时图片地址\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tctx.draw(false, ()=>{\r\n\t\t\t\t\tuni.canvasToTempFilePath({ //静静注意 这里有bug 我也改不来 你问问妖妖吧\r\n\t\t\t\t\t\tcanvasId: 'shareFriend',\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tthat.picTempUrl = res.tempFilePath;\r\n\t\t\t\t\t\t\tconsole.log(123);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//获取手机相册权限\r\n\t\t\tgetPhotosAlbumAuth() {\r\n\t\t\t\tuni.getSetting({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (!res.authSetting['scope.writePhotosAlbum']) {\r\n\t\t\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\t\t\tscope: 'scope.writePhotosAlbum',\r\n\t\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\t\tthis.saveImage();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.saveImage();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//保存海报\r\n\t\t\tsaveImage() {\r\n\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\tfilePath: this.picTempUrl,\r\n\t\t\t\t\tsuccess: (data) => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"图片保存成功\",\r\n\t\t\t\t\t\t\ticon: \"success\",\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tthis.posterStatus = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\n"],"sourceRoot":""}